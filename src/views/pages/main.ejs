<%- include('../partials/header'); -%>
    <%- include('../partials/menu'); -%>

        <body>
            <div class="container mt-4">
                <form method="get" action="/search" class="form-inline my-2 my-lg-0">
                    <input type="text" name="breweryname" placeholder="Search" class="searchTerm">
                </form>
                <div class="row">
                    <%if (items) { 
                        var cards = '';
                        var counter = 0;
                        items.forEach(function(item) {
                          cards += '<div class="col-md-4"><div class="card py-4 px-3"><p id=card-' + counter + '>' + item.name + '</p><p id="micro-title">' + item.brewery_type + '</p><p>' + item.street + '</p><button type="button" class="my-btn btn btn-primary" data-toggle="modal" data-target="#exampleModal" onclick="populateModal(' + counter + ')">Add Review</button></div></div>';
                          counter++;
                        });
                    }%>
                    <%- cards %>
                </div>

                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Add Review</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true"><i class="fas fa-times"></i></span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form method="post" action="/addreview">
                                    <div class="form-group">
                                        <label for="exampleFormControlInput1">Brewery Name</label>
                                        <input type="text" name="breweryname" class="form-control" id="brewery-name" placeholder="" readonly>
                                    </div>
                                    <div class="form-group">
                                        <label for="exampleFormControlTextarea1">Review</label>
                                        <textarea class="form-control" name="review" id="review" rows="3"></textarea>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="my-btn btn btn-secondary"
                                            data-dismiss="modal">Close</button>
                                        <button type="submit" value="submit" class="my-btn btn btn-primary">Submit</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </body>
        <%- include('../partials/footer'); -%>